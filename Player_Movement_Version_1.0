#Credit to Coding Team: Noah Thomas, Jacob Cote, Pablo Garcia, Issac Rosales
extends CharacterBody2D

@export var speed = 3200

var walk_speed = 3200
var run_speed = 6400 
var times_clicked = 1 
var double_click = false

var target = position

func _input(event):
    if event.is_action_pressed("Click"):
        target = get_global_mouse_position()

func _physics_process(delta):
    velocity = position.direction_to(target) * walk_speed * delta
    # look_at(target)
    if position.distance_to(target) > 10:
        move_and_slide()
    _button_clicked()
    _if_double_clicked_true()
    _if_run()
    _button_unclicked()
    _if_walk()
    _if_double_clicked_false() 
    
func _button_clicked(): 
    if Input.is_action_just_pressed("Click"):
        times_clicked += 1
func _button_unclicked(): 
    if Input.is_action_just_released("Click"):
        times_clicked -= 1
func _if_double_clicked_false(): 
    if times_clicked == 1:
        double_click = false
        
func _if_double_clicked_true():
    if times_clicked == 2:
        double_click = true
        
func _if_run(): 
    if double_click == true:
        walk_speed = run_speed
func _if_walk():
    if double_click == false:
        walk_speed = 1600
